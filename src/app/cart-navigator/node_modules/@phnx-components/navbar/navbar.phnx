/**
 * Shapes
 * Line
 * Project: Phoenix UI creator
 * Author: Debashish
 */


"use strict";

module.exports = {
    name: "navbar",
    imports: [],
    variables: [{
        name: "alias",
        type: "string",
        defaultValue: "Navbar",
        metadata: [{
            displayName: "Alias",
            widget: "INPUT",
            widgetData: {},
            grouping: "General",
            target: "alias"
        }],
        isMandatory: false,
        scope: "public"

    },
        {
            name: "compStyle",
            type: "object",
            defaultValue: {
                __root: {
                    "width": 600,
                    "height": 50,
                    "backgroundColor": "rgba(241, 241, 241, 1)",
                    borderWidth: "1px",
                    borderStyle: {
                        text: "Solid",
                        className: "fa fa-trash",
                        id: "solid"
                    },
                    borderColor: "rgba(200, 200, 200, 1)",
                }
            },
            metadata: [{
                displayName: 'Navbar',
                widget: 'MENU_STYLE_PROPERTIES',
                widgetData: {},
                grouping: '',
                tab: 'Style',
                target: 'compStyle.__root'
            },{
                displayName: "Width",
                widget: "NUMERIC_STEPPER",
                widgetData: {},
                grouping: "General",
                target: "compStyle.__root.width"
            }, {
                displayName: "Height",
                widget: "NUMERIC_STEPPER",
                widgetData: {},
                grouping: "General",
                target: "compStyle.__root.height"
            }, {
                displayName: "Background Color",
                widget: "COLOR_PICKER",
                widgetData: {},
                grouping: "General",
                target: "compStyle.__root.backgroundColor"
            }, {
                displayName: "Border Width",
                widget: "NUMERIC_STEPPER",
                widgetData: {
                    minValue: 0
                },
                grouping: "General",
                target: "compStyle.__root.borderWidth"
            }, {
                displayName: "Border Style",
                widget: "DROPDOWN",
                widgetData: {
                    values: [{
                        text: "None",
                        className: "fa fa-trash",
                        id: "none"
                    },
                        {
                            text: "Solid",
                            className: "fa fa-trash",
                            id: "solid"
                        },
                        {
                            text: "Dotted",
                            className: "fa fa-trash",
                            id: "dotted"
                        },
                        {
                            text: "Dashed",
                            className: "fa fa-trash",
                            id: "dashed"
                        },
                        {
                            text: "Double",
                            className: "fa fa-trash",
                            id: "double"
                        }

                    ]
                },
                grouping: "General",
                target: "compStyle.__root.borderStyle"
            }, {
                displayName: "Border Color",
                widget: "COLOR_PICKER",
                widgetData: {},
                grouping: "General",
                target: "compStyle.__root.borderColor"
            }],
            scope: "public"
        },
        {
            name: "navigateFn",
            type: "function",
            defaultValue: () => {},
            scope: "public"
        },
        {
            name: "menuBar",
            type: "array",
            defaultValue: [{ name: "menu 1", link: null }, { name: "menu 2", link: null }, { name: "menu 3", link: null }, { name: "menu 4", link: null }, { name: "menu 5", link: null }],
            metadata: [{
                displayName: 'Navbar',
                widget: 'MULTILINK_PROPERTIES',
                widgetData: {},
                grouping: '',
                tab: 'Hyperlink',
                target: 'menuBar'
            },{
                displayName: "Menubar Options",
                widget: "MULTILINK",
                widgetData: {
                    multiLink: true,
                    enableSuggestions: false,
                    placeHolder: "Add New Menu Option"
                },
                grouping: "Menu Style",
                target: "menuBar"
            }],
            scope: "public"
        }, {
            name: "menu",
            type: "object",
            defaultValue: {
                backgroundColor: "rgba(255, 255, 255, 1)",
                borderRightWidth: "1px",
                borderRightStyle: {
                    text: "Solid",
                    className: "fa fa-trash",
                    id: "solid"
                },
                borderRightColor: "rgba(198, 198, 198, 1)",
                color: "rgba(56, 56, 56, 1)",
                fontSize: "12px",
                textAlign: "center",
                textTransform: "none",
                fontFamily: "Roboto",
            },
            metadata: [{
                displayName: 'Navbar',
                widget: 'SUB_MENU_PROPERTIES',
                widgetData: {
                    activeBackgroundColor: 'activeBackgroundColor',
                    selectedMenu: 'selectedMenu',
                    heightPercent: 'widthPercent',
                    activeTextColor: 'activeTextColor',
                    menuBar: 'menuBar'
                },
                grouping: '',
                tab: 'Sub-Menu',
                target: 'menu'
            },{
                displayName: "Background Color",
                widget: "COLOR_PICKER",
                widgetData: {},
                grouping: "Menu Style",
                target: "menu.backgroundColor"
            }, {
                displayName: "Text Color",
                widget: "COLOR_PICKER",
                widgetData: {},
                grouping: "Menu Style",
                target: "menu.color"
            }, {
                displayName: "Text Font",
                widget: "FONT_SELECTOR",
                widgetData: {},
                grouping: "Menu Style",
                target: "menu.fontFamily"
            }, {
                displayName: "Text Style",
                widget: "TEXT_FORMATTER",
                widgetData: {},
                grouping: "Menu Style",
                target: "menu.textStyle"
            }, {
                displayName: "Font Size",
                widget: "NUMERIC_STEPPER",
                widgetData: {},
                grouping: "Menu Style",
                target: "menu.fontSize"
            }, {
                displayName: "Text Align",
                widget: "TEXT_ALIGNER",
                widgetData: {},
                grouping: "Menu Style",
                target: "menu.textAlign"
            }, {
                displayName: "Case Type",
                widget: "TEXT_TRANSFORMER",
                widgetData: {},
                grouping: "Menu Style",
                target: "menu.textTransform"
            }, {
                displayName: "Border Width",
                widget: "NUMERIC_STEPPER",
                widgetData: {
                    minValue: 0
                },
                grouping: "Menu Style",
                target: "menu.borderRightWidth"
            }, {
                displayName: "Border Style",
                widget: "DROPDOWN",
                widgetData: {
                    values: [{
                        text: "None",
                        className: "fa fa-trash",
                        id: "none"
                    },
                        {
                            text: "Solid",
                            className: "fa fa-trash",
                            id: "solid"
                        },
                        {
                            text: "Dotted",
                            className: "fa fa-trash",
                            id: "dotted"
                        },
                        {
                            text: "Dashed",
                            className: "fa fa-trash",
                            id: "dashed"
                        },
                        {
                            text: "Double",
                            className: "fa fa-trash",
                            id: "double"
                        }

                    ]
                },
                grouping: "Menu Style",
                target: "menu.borderRightStyle"
            }, {
                displayName: "Border Color",
                widget: "COLOR_PICKER",
                widgetData: {},
                grouping: "Menu Style",
                target: "menu.borderRightColor"
            }],
            scope: "public"
        },
        {
            name: "widthPercent",
            type: "number",
            defaultValue: 60,
            metadata: [{
                displayName: "Width",
                widget: "SLIDER",
                widgetData: {
                    maxValue: 100,
                    minValue: 1,
                    stepCount: 1
                },
                grouping: "Menu Style",
                target: "widthPercent"
            }],
            scope: "public"
        },
        {
            name: "selectedMenu",
            type: "number",
            defaultValue: "1",
            metadata: [{
                displayName: "Active Menu Position",
                widget: "INPUT",
                widgetData: {
                    inputType: "number",
                    minValue: 0
                },
                grouping: "Menu Style",
                target: "selectedMenu"
            }],
            scope: "public"
        },
        {
            name: "activeTextColor",
            type: "string",
            defaultValue: "rgba(255, 255, 255, 1)",
            metadata: [{
                displayName: "Active Text Color",
                widget: "COLOR_PICKER",
                widgetData: {},
                grouping: "Menu Style",
                target: "activeTextColor"
            }],
            scope: "public"
        },
        {
            name: "activeBackgroundColor",
            type: "string",
            defaultValue: "",
            metadata: [{
                displayName: "Active Background Color",
                widget: "COLOR_PICKER",
                widgetData: {},
                grouping: "Menu Style",
                target: "activeBackgroundColor"
            }],
            scope: "public"
        }, {
            name: "colorTheme",
            type: "object",
            defaultValue: {
                scheme: "Default",
                colors: ""
            },
            scope: "public"
        }, {
            name: "colorThemeDefault",
            type: "string",
            defaultValue: "#3ec4cd",
            scope: "public"
        }
    ],
    functions: {
        drawSubmenu: (data) => {
            let arrayData = data;
            return data.map(function (item) {
                let backgroundColor = __var__menu.backgroundColor;
                let textColor = __var__menu.color;
                if (arrayData.indexOf(item) == (__var__selectedMenu - 1) && (__var__selectedMenu <= arrayData.length) && (__var__selectedMenu != -1)) {
                    textColor = __var__activeTextColor;
                    backgroundColor = __var__activeBackgroundColor || (__var__colorTheme.colors ? __var__colorTheme.colors[0] : __var__colorThemeDefault);
                }
                return __tmpl__subMenu;
            });

        },
        getModifiedProps: (textColor) => {
            let modifiedProps = {
                color: textColor,
                fontSize: __var__menu.fontSize,
                marginTop: 'auto',
                marginBottom: 'auto',
                width: '100%',
                fontWeight: __var__menu.fontWeight,
                textDecoration: __var__menu.textDecoration,
                fontStyle: __var__menu.fontStyle,
                textAlign: __var__menu.textAlign,
                textTransform: __var__menu.textTransform,
                fontFamily: __var__menu.fontFamily,
                wordWrap: "break-word"
            };
            return Object.assign(modifiedProps, __var__menu.textStyle);
        },
        redirect: (evt) => {
            let a = JSON.parse(evt.currentTarget.dataset.id);
            if (a.link) {
                __var__navigateFn(a.link);
            }
            evt.preventDefault();
        }
    },
    eventHandlers: [],
    eventEmitters: [],
    actions: [],
    workflows: {},
    localTemplates: {
        subMenu: {
            type: "a",
            props: {
                style: {
                    width: "(__var__widthPercent / __var__menuBar.length)+'%'",
                    height: "100%",
                    display: "flex",
                    backgroundColor: "__fnParam__backgroundColor",
                    borderRightWidth: "__var__menu.borderRightWidth",
                    borderRightColor: "__var__menu.borderRightColor",
                    borderRightStyle: "__var__menu.borderRightStyle.id",
                    paddingLeft: "10px",
                    paddingRight: "10px",
                    overflow: "hidden"
                },
                href: "__fnParam__item.link ? (__fnParam__item.link.name + '.html') : '#'",
                "data-id": "JSON.stringify(__fnParam__item)",
                onClick: "__fn__redirect"
            },
            children: {
                type: "span",
                props: {
                    style: "__fn__getModifiedProps(__fnParam__textColor)"
                },
                children: "__fnParam__item.name"
            }

        }
    },
    structure: {
        type: "div",
        props: {
            style: {
                width: "__var__compStyle.__root.width",
                height: "__var__compStyle.__root.height",
                backgroundColor: "__var__compStyle.__root.backgroundColor",
                borderWidth: "__var__compStyle.__root.borderWidth",
                borderStyle: "__var__compStyle.__root.borderStyle.id",
                borderColor: "__var__compStyle.__root.borderColor",
                display: "flex",
                overflow: "hidden"
            }
        },
        children: "__fn__drawSubmenu(__var__menuBar)"
    },
    lifecycleHooks: {}

};