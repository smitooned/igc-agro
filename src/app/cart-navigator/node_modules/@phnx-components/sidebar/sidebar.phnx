/**
 * Sidebar component
 * Project: Phoenix UI creator
 * Author: Debashish
 */


"use strict";

module.exports = {
    name: "sidebar",
    imports: [],
    variables: [{
        name: "alias",
        type: "string",
        defaultValue: "Sidebar",
        metadata: [{
            displayName: "Alias",
            widget: "INPUT",
            widgetData: {},
            grouping: "General",
            target: "alias"
        }],
        isMandatory: false,
        scope: "public"

    },
        {
            name: "compStyle",
            type: "object",
            defaultValue: {
                __root: {
                    "width": 200,
                    "height": 325,
                    "backgroundColor": "rgba(35, 35, 35, 1)",
                    borderWidth: "1px",
                    borderStyle: {
                        text: "Solid",
                        className: "fa fa-trash",
                        id: "solid"
                    },
                    borderColor: "rgba(200, 200, 200, 1)",
                }
            },
            metadata: [{
                displayName: 'Sidebar',
                widget: 'MENU_STYLE_PROPERTIES',
                widgetData: {},
                grouping: '',
                tab: 'Style',
                target: 'compStyle.__root'
            },{
                displayName: "Width",
                widget: "NUMERIC_STEPPER",
                widgetData: {},
                grouping: "General",
                target: "compStyle.__root.width"
            }, {
                displayName: "Height",
                widget: "NUMERIC_STEPPER",
                widgetData: {},
                grouping: "General",
                target: "compStyle.__root.height"
            },
                {
                    displayName: "Background Color",
                    widget: "COLOR_PICKER",
                    widgetData: {},
                    grouping: "General",
                    target: "compStyle.__root.backgroundColor"
                }, {
                    displayName: "Border Width",
                    widget: "NUMERIC_STEPPER",
                    widgetData: {
                        minValue: 0
                    },
                    grouping: "General",
                    target: "compStyle.__root.borderWidth"
                }, {
                    displayName: "Border Style",
                    widget: "DROPDOWN",
                    widgetData: {
                        values: [{
                            text: "None",
                            className: "fa fa-trash",
                            id: "none"
                        },
                            {
                                text: "Solid",
                                className: "fa fa-trash",
                                id: "solid"
                            },
                            {
                                text: "Dotted",
                                className: "fa fa-trash",
                                id: "dotted"
                            },
                            {
                                text: "Dashed",
                                className: "fa fa-trash",
                                id: "dashed"
                            },
                            {
                                text: "Double",
                                className: "fa fa-trash",
                                id: "double"
                            }

                        ]
                    },
                    grouping: "General",
                    target: "compStyle.__root.borderStyle"
                }, {
                    displayName: "Border Color",
                    widget: "COLOR_PICKER",
                    widgetData: {},
                    grouping: "General",
                    target: "compStyle.__root.borderColor"
                }
            ],
            scope: "public"
        },
        {
            name: "navigateFn",
            type: "function",
            defaultValue: () => {},
            scope: "public"
        },
        {
            name: "mainMenu",
            type: "object",
            defaultValue: {
                height: 12,
                backgroundColor: "rgba(35, 35, 35, 1)",
                borderBottomWidth: '1px',
                borderBottomStyle: {
                    text: "Solid",
                    className: "fa fa-trash",
                    id: "solid"
                },
                borderBottomColor: "rgba(200, 200, 200, 1)",
                text: "Main Menu",
                color: "rgba(255,255,255,1)",
                fontSize: "20px",
                fontWeight: 'none',
                fontStyle: 'none',
                textDecoration: 'none',
                textAlign: "left",
                textTransform: "none",
                fontFamily: "Roboto"
            },
            metadata: [{
                displayName: 'Sidebar',
                widget: 'MAIN_MENU_PROPERTIES',
                widgetData: {},
                grouping: '',
                tab: 'Main-Menu',
                target: 'mainMenu'
            },{
                displayName: "Height",
                widget: "SLIDER",
                widgetData: {
                    maxValue: 100,
                    minValue: 1,
                    stepCount: 1
                },
                grouping: "Main Menu Style",
                target: "mainMenu.height"
            }, {
                displayName: "Background Color",
                widget: "COLOR_PICKER",
                widgetData: {},
                grouping: "Main Menu Style",
                target: "mainMenu.backgroundColor"
            }, {
                displayName: "Text",
                widget: "INPUT",
                widgetData: {},
                grouping: "Main Menu Style",
                target: "mainMenu.text"
            }, {
                displayName: "Text Style",
                widget: "TEXT_FORMATTER",
                widgetData: {},
                grouping: "Main Menu Style",
                target: "mainMenu.textStyle"
            }, {
                displayName: "Text Color",
                widget: "COLOR_PICKER",
                widgetData: {},
                grouping: "Main Menu Style",
                target: "mainMenu.color"
            }, {
                displayName: "Text Font",
                widget: "FONT_SELECTOR",
                widgetData: {},
                grouping: "Main Menu Style",
                target: "mainMenu.fontFamily"
            }, {
                displayName: "Font Size",
                widget: "NUMERIC_STEPPER",
                widgetData: {},
                grouping: "Main Menu Style",
                target: "mainMenu.fontSize"
            }, {
                displayName: "Text Align",
                widget: "TEXT_ALIGNER",
                widgetData: {},
                grouping: "Main Menu Style",
                target: "mainMenu.textAlign"
            }, {
                displayName: "Case Type",
                widget: "TEXT_TRANSFORMER",
                widgetData: {},
                grouping: "Main Menu Style",
                target: "mainMenu.textTransform"
            }, {
                displayName: "Border Width",
                widget: "NUMERIC_STEPPER",
                widgetData: {
                    minValue: 0
                },
                grouping: "Main Menu Style",
                target: "mainMenu.borderBottomWidth"
            }, {
                displayName: "Border Style",
                widget: "DROPDOWN",
                widgetData: {
                    values: [{
                        text: "None",
                        className: "fa fa-trash",
                        id: "none"
                    },
                        {
                            text: "Solid",
                            className: "fa fa-trash",
                            id: "solid"
                        },
                        {
                            text: "Dotted",
                            className: "fa fa-trash",
                            id: "dotted"
                        },
                        {
                            text: "Dashed",
                            className: "fa fa-trash",
                            id: "dashed"
                        },
                        {
                            text: "Double",
                            className: "fa fa-trash",
                            id: "double"
                        }

                    ]
                },
                grouping: "Main Menu Style",
                target: "mainMenu.borderBottomStyle"
            }, {
                displayName: "Border Color",
                widget: "COLOR_PICKER",
                widgetData: {},
                grouping: "Main Menu Style",
                target: "mainMenu.borderBottomColor"
            }],
            scope: "public"
        },
        {
            name: "subMenu",
            type: "object",
            defaultValue: {
                backgroundColor: "rgba(56, 56, 56, 1)",
                borderBottomWidth: '1px',
                borderBottomStyle: {
                    text: "Solid",
                    className: "fa fa-trash",
                    id: "solid"
                },
                borderBottomColor: "rgba(200, 200, 200, 1)",
                color: "rgba(255,255,255,1)",
                fontSize: "12px",
                fontWeight: 'none',
                fontStyle: 'none',
                textDecoration: 'none',
                textAlign: "left",
                textTransform: "none",
                fontFamily: "Roboto"
            },
            metadata: [{
                displayName: 'Sidebar',
                widget: 'SUB_MENU_PROPERTIES',
                widgetData: {
                    activeBackgroundColor: 'activeBackgroundColor',
                    selectedMenu: 'selectedMenu',
                    heightPercent: 'heightPercent',
                    activeTextColor: 'activeTextColor',
                    menuBar: 'menuBar'
                },
                grouping: '',
                tab: 'Sub-Menu',
                target: 'subMenu'
            },{
                displayName: "Background Color",
                widget: "COLOR_PICKER",
                widgetData: {},
                grouping: "Sub Menu Style",
                target: "subMenu.backgroundColor"
            }, {
                displayName: "Text Color",
                widget: "COLOR_PICKER",
                widgetData: {},
                grouping: "Sub Menu Style",
                target: "subMenu.color"
            }, {
                displayName: "Text Font",
                widget: "FONT_SELECTOR",
                widgetData: {},
                grouping: "Sub Menu Style",
                target: "subMenu.fontFamily"
            }, {
                displayName: "Text Style",
                widget: "TEXT_FORMATTER",
                widgetData: {},
                grouping: "Sub Menu Style",
                target: "subMenu.textStyle"
            }, {
                displayName: "Font Size",
                widget: "NUMERIC_STEPPER",
                widgetData: {},
                grouping: "Sub Menu Style",
                target: "subMenu.fontSize"
            }, {
                displayName: "Text Align",
                widget: "TEXT_ALIGNER",
                widgetData: {},
                grouping: "Sub Menu Style",
                target: "subMenu.textAlign"
            }, {
                displayName: "Case Type",
                widget: "TEXT_TRANSFORMER",
                widgetData: {},
                grouping: "Sub Menu Style",
                target: "subMenu.textTransform"
            }, {
                displayName: "Border Width",
                widget: "NUMERIC_STEPPER",
                widgetData: {
                    minValue: 0
                },
                grouping: "Sub Menu Style",
                target: "subMenu.borderBottomWidth"
            }, {
                displayName: "Border Style",
                widget: "DROPDOWN",
                widgetData: {
                    values: [{
                        text: "None",
                        className: "fa fa-trash",
                        id: "none"
                    },
                        {
                            text: "Solid",
                            className: "fa fa-trash",
                            id: "solid"
                        },
                        {
                            text: "Dotted",
                            className: "fa fa-trash",
                            id: "dotted"
                        },
                        {
                            text: "Dashed",
                            className: "fa fa-trash",
                            id: "dashed"
                        },
                        {
                            text: "Double",
                            className: "fa fa-trash",
                            id: "double"
                        }

                    ]
                },
                grouping: "Sub Menu Style",
                target: "subMenu.borderBottomStyle"
            }, {
                displayName: "Border Color",
                widget: "COLOR_PICKER",
                widgetData: {},
                grouping: "Sub Menu Style",
                target: "subMenu.borderBottomColor"
            }],
            scope: "public"
        },
        {
            name: "menuBar",
            type: "array",
            defaultValue: [{ name: "menu 1", link: null }, { name: "menu 2", link: null }, { name: "menu 3", link: null }, { name: "menu 4", link: null }, { name: "menu 5", link: null }],
            metadata: [{
                displayName: 'Sidebar',
                widget: 'MULTILINK_PROPERTIES',
                widgetData: {},
                grouping: '',
                tab: 'Hyperlink',
                target: 'menuBar'
            }, {
                displayName: "Menubar Options",
                widget: "MULTILINK",
                widgetData: {
                    multiLink: true,
                    enableSuggestions: false,
                    placeHolder: "Add New Menu Option"
                },
                grouping: "Sub Menu Style",
                target: "menuBar"
            }],
            scope: "public"
        },
        {
            name: "selectedMenu",
            type: "number",
            defaultValue: "2",
            metadata: [{
                displayName: "Active Menu Position",
                widget: "INPUT",
                widgetData: {
                    inputType: "number",
                    minValue: 0
                },
                grouping: "Sub Menu Style",
                target: "selectedMenu"
            }],
            scope: "public"
        },
        {
            name: "heightPercent",
            type: "number",
            defaultValue: 100,
            metadata: [{
                displayName: "Height",
                widget: "SLIDER",
                widgetData: {
                    maxValue: 100,
                    minValue: 1,
                    stepCount: 1
                },
                grouping: "Sub Menu Style",
                target: "heightPercent"
            }],
            scope: "public"
        },
        {
            name: "activeTextColor",
            type: "string",
            defaultValue: "rgba(255,255,255,1)",
            metadata: [{
                displayName: "Active Text Color",
                widget: "COLOR_PICKER",
                widgetData: {},
                grouping: "Sub Menu Style",
                target: "activeTextColor"
            }],
            scope: "public"
        },
        {
            name: "activeBackgroundColor",
            type: "string",
            defaultValue: "",
            metadata: [{
                displayName: "Active Background Color",
                widget: "COLOR_PICKER",
                widgetData: {},
                grouping: "Sub Menu Style",
                target: "activeBackgroundColor"
            }],
            scope: "public"
        },
        {
            name: "colorTheme",
            type: "object",
            defaultValue: {
                scheme: "Default",
                colors: ""
            },
            scope: "public"
        }, {
            name: "colorThemeDefault",
            type: "string",
            defaultValue: "#3ec4cd",
            scope: "public"
        }
    ],
    functions: {
        drawSubmenu: (data) => {
            return data.map(function (item) {
                let arrayData = data;
                let backgroundColor = __var__subMenu.backgroundColor;
                let textColor = __var__subMenu.color;
                if (arrayData.indexOf(item) == (__var__selectedMenu - 1) && (__var__selectedMenu <= arrayData.length) && (__var__selectedMenu != -1)) {
                    textColor = __var__activeTextColor;
                    backgroundColor = __var__activeBackgroundColor || (__var__colorTheme.colors ? __var__colorTheme.colors[0] : __var__colorThemeDefault);
                }
                return __tmpl__subMenu;
            });
        },
        subMenuHeight: () => {
            return 100 - __var__mainMenu.height + '%';
        },
        getMainMenuModifiedProps: () => {
            let mainMenuModifiedProps = {
                color: __var__mainMenu.color,
                fontSize: __var__mainMenu.fontSize,
                fontFamily: __var__mainMenu.fontFamily,
                fontStyle: __var__mainMenu.fontStyle,
                fontWeight: __var__mainMenu.fontWeight,
                textDecoration: __var__mainMenu.textDecoration
            };
            return Object.assign(mainMenuModifiedProps, __var__mainMenu.textStyle);
        },
        getSubMenuModifiedProps: (textColor) => {
            let subMenuModifiedProps = {
                color: textColor,
                fontSize: __var__subMenu.fontSize,
                display: "block",
                width: '100%',
                height: 'auto',
                margin: 'auto 10px',
                textDecoration: __var__subMenu.textDecoration,
                fontStyle: __var__subMenu.fontStyle,
                fontWeight: __var__subMenu.fontWeight,
                textAlign: __var__subMenu.textAlign,
                textTransform: __var__subMenu.textTransform,
                fontFamily: __var__subMenu.fontFamily
            };
            return Object.assign(subMenuModifiedProps, __var__subMenu.textStyle);
        },
        redirect: (evt) => {
            let a = JSON.parse(evt.currentTarget.dataset.id);
            if (a.link) {
                __var__navigateFn(a.link);
            }
            evt.preventDefault();
        }
    },
    eventHandlers: [],
    eventEmitters: [],
    actions: [],
    workflows: {},
    localTemplates: {
        subMenu: {
            type: "a",
            props: {
                style: {
                    height: "(100 / __var__menuBar.length)+'%'",
                    backgroundColor: "__fnParam__backgroundColor",
                    borderBottomStyle: "__var__subMenu.borderBottomStyle.id",
                    borderBottomColor: "__var__subMenu.borderBottomColor",
                    borderBottomWidth: "__var__subMenu.borderBottomWidth",
                    textAlign: "__var__mainMenu.textAlign",
                    textTransform: "__var__mainMenu.textTransform",
                    textDecoration: '__var__mainMenu.textDecoration',
                    overflow: "hidden",
                    display: 'flex',
                    paddingLeft: "20px",
                    paddingRight: "20px"
                },
                href: "__fnParam__item.link ? (__fnParam__item.link.name + '.html') : '#'",
                "data-id": "JSON.stringify(__fnParam__item)",
                onClick: "__fn__redirect"
            },
            children: {
                type: "span",
                props: {
                    style: "__fn__getSubMenuModifiedProps(__fnParam__textColor)"
                },
                children: "__fnParam__item.name"
            }

        }
    },
    structure: {
        type: "div",
        props: {
            style: {
                width: "__var__compStyle.__root.width",
                height: "__var__compStyle.__root.height",
                backgroundColor: "__var__compStyle.__root.backgroundColor",
                borderWidth: "__var__compStyle.__root.borderWidth",
                borderStyle: "__var__compStyle.__root.borderStyle.id",
                borderColor: "__var__compStyle.__root.borderColor"
            }
        },
        children: [{
            type: "div",
            props: {
                style: {
                    height: "__var__mainMenu.height+'%'",
                    backgroundColor: "__var__mainMenu.backgroundColor",
                    borderBottomStyle: '__var__mainMenu.borderBottomStyle.id',
                    borderBottomWidth: '__var__mainMenu.borderBottomWidth',
                    borderBottomColor: '__var__mainMenu.borderBottomColor',
                    padding: "10px",
                    textAlign: "__var__mainMenu.textAlign",
                    textTransform: "__var__mainMenu.textTransform",
                    textDecoration: '__var__mainMenu.textDecoration',
                    fontWeight: '__var__mainMenu.fontWeight',
                    fontStyle: '__var__mainMenu.fontStyle',
                    overflow: "hidden"
                }
            },
            children: [{
                type: "a",
                props: {
                    style: "__fn__getMainMenuModifiedProps()"
                },
                children: "__var__mainMenu.text"
            }]
        }, {
            type: "div",
            props: {
                style: {
                    height: "__fn__subMenuHeight()",
                    overflow: "hidden"
                }
            },
            children: {
                type: "div",
                props: {
                    style: {
                        height: "__var__heightPercent+'%'"
                    }
                },
                children: "__fn__drawSubmenu(__var__menuBar)"
            }
        }]
    },
    lifecycleHooks: {}
};