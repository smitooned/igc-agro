# Consuming the phoenix logging service using the node-logger
### Step 1: Require node-logger and get the logger object
```javascript
var PhoenixLogger = require("@phoenix/node-logger");
var phoenixLogger = new PhoenixLogger();
var logger = phoenixLogger.instance;
```

### Step 2: Configure the logger (optional, if not configured will use default configuration)
- Specify the transports (similar to log appender) which determine where the logs will be sent to in the constructor as strings for default transport configuration

```javascript
var phoenixLogger = new PhoenixLogger(['https'
]);
var logger = phoenixLogger.instance;


var phoenixLogger = new PhoenixLogger(['amqp'
]);
var logger = phoenixLogger.instance;
```

- Configure the tranports. Eg: Specify the amqp configuration for the amqp transport, specify the https link to which the https transport will log to, or specify logging levels for each transport.
- Specify log levels, log severity and also log colors
#### Http transport configuration sample

```javascript
var httpsOptions = {
                    logPath: '/phoenix/logging-service-debug/addLogs/postHttp/', 
                    level: 'silly', 
                    appName: 'nodeApp'
                  };
var phoenixLogger = new PhoenixLogger([{ {name: 'https', options: httpsOptions }
]);
var logger = phoenixLogger.instance;
```

#### Amqp transport configuration sample

```javascript
var amqpOptions = { 
                    routingKeyPattern: 'phoenix-trial-queue', 
                    silent: false, 
                    exchange: 
                        {
                            name: 'log-trials', 
                            properties: 
                            { 
                                type: 'direct', 
                                durable: true, 
                                autoDelete: false
                            }
                        }, 
                    host: '172.25.10.198', 
                    port: 5672, 
                    vhost: '/', 
                    login: 'daniel', 
                    password: 'pog', 
                    keepAlive: false,
                    level: 'silly', appName: 'nodeApp'
                };
var phoenixLogger = new PhoenixLogger([{ {name: 'amqp', options: amqpOptions }
]);
var logger = phoenixLogger.instance;
```
#### Console transport configuration sample
```javascript
var consoleOptions = {
                      colorize: true, 
                      level: 'silly'
                      };
var phoenixLogger = new PhoenixLogger([{ {name: 'console', options: consoleOptions }
]);
var logger = phoenixLogger.instance;
```

#### Log color configuration sample
```javascript
phoenixLogger.addColors({error: 'red', warn: 'yellow', info: 'green', verbose: 'orange', debug: 'blue', silly: 'white'});
```

### Step 3: Use the logger object and log!
```javascript
var logger = phoenixLogger.getLogger();
logger.info("Hello there, this is an info log :)");
logger.error("This is an error log!_!");
logger.silly("This is a silly log o_O");
```
**To send metadata with log**
```javascript
logger.info("log message", { metadata1: 'This is metadata', metadata2: 'More metadata'});
```
# Default logger configuration
- AMQP transport and console transport will be enabled
- Default AMQP transport configuration:

```javascript
routingKeyPattern: 'dev-phoenix-logger-inqueue', 
level: 'silly', 
silent: false,
host: '172.25.1.230', 
port: 5672, 
vhost: 'logger', 
login: 'phoenix', 
password: 'musigma123', 
keepAlive: 4000,
appName: 'nodeApp'
```

- Default console trasport configuration:

```javascript
colorize: true, 
level: 'silly'
```

- Default http transport configuration (when added without config options)

```javascript
logPath: '/phoenix/logging-service-debug/addLogs/postHttp/', 
level: 'silly', 
appName: 'nodeApp'
```

**For information on the logging features provided by the logger go through the winston logger documentation here(https://www.npmjs.com/package/winston) since our logger internally uses the winston logger**

# To see your logs
Go here http://172.25.1.230:5601
Better dashboard coming soon